const __vite__fileDeps=["assets/comp-entry-CBqU0JXK.js","assets/comp-entry-DytM9_Wd.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Bi=Object.defineProperty;var zi=(t,e,r)=>e in t?Bi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var m=(t,e,r)=>(zi(t,typeof e!="symbol"?e+"":e,r),r),or=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var U=(t,e,r)=>(or(t,e,"read from private field"),r?r.call(t):e.get(t)),G=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},tt=(t,e,r,n)=>(or(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);function Up(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const Wi="modulepreload",Gi=function(t){return"/tmagic-editor/playground/runtime/vue3/playground/"+t},ar={},Te=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(r.map(a=>{if(a=Gi(a),a in ar)return;ar[a]=!0;const c=a.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(a,'"]').concat(u)))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Wi,c||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((f,$)=>{h.addEventListener("load",f),h.addEventListener("error",()=>$(new Error("Unable to preload CSS for ".concat(a))))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Re={exports:{}},Tt=typeof Reflect=="object"?Reflect:null,cr=Tt&&typeof Tt.apply=="function"?Tt.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ee;Tt&&typeof Tt.ownKeys=="function"?ee=Tt.ownKeys:Object.getOwnPropertySymbols?ee=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ee=function(e){return Object.getOwnPropertyNames(e)};function qi(t){console&&console.warn&&console.warn(t)}var mn=Number.isNaN||function(e){return e!==e};function S(){S.init.call(this)}Re.exports=S;Re.exports.once=Ji;S.EventEmitter=S;S.prototype._events=void 0;S.prototype._eventsCount=0;S.prototype._maxListeners=void 0;var ur=10;function de(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(S,"defaultMaxListeners",{enumerable:!0,get:function(){return ur},set:function(t){if(typeof t!="number"||t<0||mn(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ur=t}});S.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};S.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||mn(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function $n(t){return t._maxListeners===void 0?S.defaultMaxListeners:t._maxListeners}S.prototype.getMaxListeners=function(){return $n(this)};S.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")cr(c,this,r);else for(var u=c.length,h=wn(c,u),n=0;n<u;++n)cr(h[n],this,r);return!0};function bn(t,e,r,n){var i,s,o;if(de(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=$n(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,qi(a)}return t}S.prototype.addListener=function(e,r){return bn(this,e,r,!1)};S.prototype.on=S.prototype.addListener;S.prototype.prependListener=function(e,r){return bn(this,e,r,!0)};function ki(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vn(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=ki.bind(n);return i.listener=r,n.wrapFn=i,i}S.prototype.once=function(e,r){return de(r),this.on(e,vn(this,e,r)),this};S.prototype.prependOnceListener=function(e,r){return de(r),this.prependListener(e,vn(this,e,r)),this};S.prototype.removeListener=function(e,r){var n,i,s,o,a;if(de(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():Yi(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};S.prototype.off=S.prototype.removeListener;S.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function _n(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Ki(i):wn(i,i.length)}S.prototype.listeners=function(e){return _n(this,e,!0)};S.prototype.rawListeners=function(e){return _n(this,e,!1)};S.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Tn.call(t,e)};S.prototype.listenerCount=Tn;function Tn(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}S.prototype.eventNames=function(){return this._eventsCount>0?ee(this._events):[]};function wn(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Yi(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Ki(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Ji(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}On(t,e,s,{once:!0}),e!=="error"&&Xi(t,i,{once:!0})})}function Xi(t,e,r){typeof t.on=="function"&&On(t,"error",e,r)}function On(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Ue=Re.exports;const Sn=Fe(Ue);var jn=typeof global=="object"&&global&&global.Object===Object&&global,Zi=typeof self=="object"&&self&&self.Object===Object&&self,Y=jn||Zi||Function("return this")(),rt=Y.Symbol,En=Object.prototype,Qi=En.hasOwnProperty,Vi=En.toString,Lt=rt?rt.toStringTag:void 0;function ts(t){var e=Qi.call(t,Lt),r=t[Lt];try{t[Lt]=void 0;var n=!0}catch(s){}var i=Vi.call(t);return n&&(e?t[Lt]=r:delete t[Lt]),i}var es=Object.prototype,rs=es.toString;function ns(t){return rs.call(t)}var is="[object Null]",ss="[object Undefined]",fr=rt?rt.toStringTag:void 0;function Et(t){return t==null?t===void 0?ss:is:fr&&fr in Object(t)?ts(t):ns(t)}function At(t){return t!=null&&typeof t=="object"}var os="[object Symbol]";function He(t){return typeof t=="symbol"||At(t)&&Et(t)==os}function as(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var nt=Array.isArray,cs=1/0,hr=rt?rt.prototype:void 0,lr=hr?hr.toString:void 0;function An(t){if(typeof t=="string")return t;if(nt(t))return as(t,An)+"";if(He(t))return lr?lr.call(t):"";var e=t+"";return e=="0"&&1/t==-cs?"-0":e}function lt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var us="[object AsyncFunction]",fs="[object Function]",hs="[object GeneratorFunction]",ls="[object Proxy]";function Cn(t){if(!lt(t))return!1;var e=Et(t);return e==fs||e==hs||e==us||e==ls}var we=Y["__core-js_shared__"],dr=function(){var t=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ds(t){return!!dr&&dr in t}var ps=Function.prototype,gs=ps.toString;function gt(t){if(t!=null){try{return gs.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var ys=/[\\^$.*+?()[\]{}|]/g,ms=/^\[object .+?Constructor\]$/,$s=Function.prototype,bs=Object.prototype,vs=$s.toString,_s=bs.hasOwnProperty,Ts=RegExp("^"+vs.call(_s).replace(ys,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ws(t){if(!lt(t)||ds(t))return!1;var e=Cn(t)?Ts:ms;return e.test(gt(t))}function Os(t,e){return t==null?void 0:t[e]}function yt(t,e){var r=Os(t,e);return ws(r)?r:void 0}var Ae=yt(Y,"WeakMap"),pr=Object.create,Ss=function(){function t(){}return function(e){if(!lt(e))return{};if(pr)return pr(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function js(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var gr=function(){try{var t=yt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();function Es(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var As=9007199254740991,Cs=/^(?:0|[1-9]\d*)$/;function Be(t,e){var r=typeof t;return e=e==null?As:e,!!e&&(r=="number"||r!="symbol"&&Cs.test(t))&&t>-1&&t%1==0&&t<e}function Dn(t,e,r){e=="__proto__"&&gr?gr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function xn(t,e){return t===e||t!==t&&e!==e}var Ds=Object.prototype,xs=Ds.hasOwnProperty;function ze(t,e,r){var n=t[e];(!(xs.call(t,e)&&xn(n,r))||r===void 0&&!(e in t))&&Dn(t,e,r)}function pe(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=void 0;c===void 0&&(c=t[a]),i?Dn(r,a,c):ze(r,a,c)}return r}var Ms=9007199254740991;function We(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ms}function Ge(t){return t!=null&&We(t.length)&&!Cn(t)}var Ps=Object.prototype;function ge(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Ps;return t===r}function Is(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Ls="[object Arguments]";function yr(t){return At(t)&&Et(t)==Ls}var Mn=Object.prototype,Ns=Mn.hasOwnProperty,Fs=Mn.propertyIsEnumerable,qe=yr(function(){return arguments}())?yr:function(t){return At(t)&&Ns.call(t,"callee")&&!Fs.call(t,"callee")};function Rs(){return!1}var Pn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mr=Pn&&typeof module=="object"&&module&&!module.nodeType&&module,Us=mr&&mr.exports===Pn,$r=Us?Y.Buffer:void 0,Hs=$r?$r.isBuffer:void 0,ke=Hs||Rs,Bs="[object Arguments]",zs="[object Array]",Ws="[object Boolean]",Gs="[object Date]",qs="[object Error]",ks="[object Function]",Ys="[object Map]",Ks="[object Number]",Js="[object Object]",Xs="[object RegExp]",Zs="[object Set]",Qs="[object String]",Vs="[object WeakMap]",to="[object ArrayBuffer]",eo="[object DataView]",ro="[object Float32Array]",no="[object Float64Array]",io="[object Int8Array]",so="[object Int16Array]",oo="[object Int32Array]",ao="[object Uint8Array]",co="[object Uint8ClampedArray]",uo="[object Uint16Array]",fo="[object Uint32Array]",D={};D[ro]=D[no]=D[io]=D[so]=D[oo]=D[ao]=D[co]=D[uo]=D[fo]=!0;D[Bs]=D[zs]=D[to]=D[Ws]=D[eo]=D[Gs]=D[qs]=D[ks]=D[Ys]=D[Ks]=D[Js]=D[Xs]=D[Zs]=D[Qs]=D[Vs]=!1;function ho(t){return At(t)&&We(t.length)&&!!D[Et(t)]}function Ye(t){return function(e){return t(e)}}var In=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ft=In&&typeof module=="object"&&module&&!module.nodeType&&module,lo=Ft&&Ft.exports===In,Oe=lo&&jn.process,St=function(){try{var t=Ft&&Ft.require&&Ft.require("util").types;return t||Oe&&Oe.binding&&Oe.binding("util")}catch(e){}}(),br=St&&St.isTypedArray,Ln=br?Ye(br):ho,po=Object.prototype,go=po.hasOwnProperty;function Nn(t,e){var r=nt(t),n=!r&&qe(t),i=!r&&!n&&ke(t),s=!r&&!n&&!i&&Ln(t),o=r||n||i||s,a=o?Is(t.length,String):[],c=a.length;for(var u in t)(e||go.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Be(u,c)))&&a.push(u);return a}function Fn(t,e){return function(r){return t(e(r))}}var yo=Fn(Object.keys,Object),mo=Object.prototype,$o=mo.hasOwnProperty;function Rn(t){if(!ge(t))return yo(t);var e=[];for(var r in Object(t))$o.call(t,r)&&r!="constructor"&&e.push(r);return e}function Ke(t){return Ge(t)?Nn(t):Rn(t)}function bo(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var vo=Object.prototype,_o=vo.hasOwnProperty;function To(t){if(!lt(t))return bo(t);var e=ge(t),r=[];for(var n in t)n=="constructor"&&(e||!_o.call(t,n))||r.push(n);return r}function Je(t){return Ge(t)?Nn(t,!0):To(t)}var wo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oo=/^\w*$/;function So(t,e){if(nt(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||He(t)?!0:Oo.test(t)||!wo.test(t)||e!=null&&t in Object(e)}var Ht=yt(Object,"create");function jo(){this.__data__=Ht?Ht(null):{},this.size=0}function Eo(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ao="__lodash_hash_undefined__",Co=Object.prototype,Do=Co.hasOwnProperty;function xo(t){var e=this.__data__;if(Ht){var r=e[t];return r===Ao?void 0:r}return Do.call(e,t)?e[t]:void 0}var Mo=Object.prototype,Po=Mo.hasOwnProperty;function Io(t){var e=this.__data__;return Ht?e[t]!==void 0:Po.call(e,t)}var Lo="__lodash_hash_undefined__";function No(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ht&&e===void 0?Lo:e,this}function dt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}dt.prototype.clear=jo;dt.prototype.delete=Eo;dt.prototype.get=xo;dt.prototype.has=Io;dt.prototype.set=No;function Fo(){this.__data__=[],this.size=0}function ye(t,e){for(var r=t.length;r--;)if(xn(t[r][0],e))return r;return-1}var Ro=Array.prototype,Uo=Ro.splice;function Ho(t){var e=this.__data__,r=ye(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Uo.call(e,r,1),--this.size,!0}function Bo(t){var e=this.__data__,r=ye(e,t);return r<0?void 0:e[r][1]}function zo(t){return ye(this.__data__,t)>-1}function Wo(t,e){var r=this.__data__,n=ye(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function J(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}J.prototype.clear=Fo;J.prototype.delete=Ho;J.prototype.get=Bo;J.prototype.has=zo;J.prototype.set=Wo;var Bt=yt(Y,"Map");function Go(){this.size=0,this.__data__={hash:new dt,map:new(Bt||J),string:new dt}}function qo(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function me(t,e){var r=t.__data__;return qo(e)?r[typeof e=="string"?"string":"hash"]:r.map}function ko(t){var e=me(this,t).delete(t);return this.size-=e?1:0,e}function Yo(t){return me(this,t).get(t)}function Ko(t){return me(this,t).has(t)}function Jo(t,e){var r=me(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function it(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}it.prototype.clear=Go;it.prototype.delete=ko;it.prototype.get=Yo;it.prototype.has=Ko;it.prototype.set=Jo;var Xo="Expected a function";function Xe(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Xo);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(Xe.Cache||it),r}Xe.Cache=it;var Zo=500;function Qo(t){var e=Xe(t,function(n){return r.size===Zo&&r.clear(),n}),r=e.cache;return e}var Vo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ta=/\\(\\)?/g,ea=Qo(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Vo,function(r,n,i,s){e.push(i?s.replace(ta,"$1"):n||r)}),e});function ra(t){return t==null?"":An(t)}function Un(t,e){return nt(t)?t:So(t,e)?[t]:ea(ra(t))}var na=1/0;function Hn(t){if(typeof t=="string"||He(t))return t;var e=t+"";return e=="0"&&1/t==-na?"-0":e}function Bn(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var zn=Fn(Object.getPrototypeOf,Object);function ia(){this.__data__=new J,this.size=0}function sa(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function oa(t){return this.__data__.get(t)}function aa(t){return this.__data__.has(t)}var ca=200;function ua(t,e){var r=this.__data__;if(r instanceof J){var n=r.__data__;if(!Bt||n.length<ca-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new it(n)}return r.set(t,e),this.size=r.size,this}function Ct(t){var e=this.__data__=new J(t);this.size=e.size}Ct.prototype.clear=ia;Ct.prototype.delete=sa;Ct.prototype.get=oa;Ct.prototype.has=aa;Ct.prototype.set=ua;function fa(t,e){return t&&pe(e,Ke(e),t)}function ha(t,e){return t&&pe(e,Je(e),t)}var Wn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,vr=Wn&&typeof module=="object"&&module&&!module.nodeType&&module,la=vr&&vr.exports===Wn,_r=la?Y.Buffer:void 0,Tr=_r?_r.allocUnsafe:void 0;function da(t,e){if(e)return t.slice();var r=t.length,n=Tr?Tr(r):new t.constructor(r);return t.copy(n),n}function pa(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}function Gn(){return[]}var ga=Object.prototype,ya=ga.propertyIsEnumerable,wr=Object.getOwnPropertySymbols,Ze=wr?function(t){return t==null?[]:(t=Object(t),pa(wr(t),function(e){return ya.call(t,e)}))}:Gn;function ma(t,e){return pe(t,Ze(t),e)}var $a=Object.getOwnPropertySymbols,qn=$a?function(t){for(var e=[];t;)Bn(e,Ze(t)),t=zn(t);return e}:Gn;function ba(t,e){return pe(t,qn(t),e)}function kn(t,e,r){var n=e(t);return nt(t)?n:Bn(n,r(t))}function va(t){return kn(t,Ke,Ze)}function _a(t){return kn(t,Je,qn)}var Ce=yt(Y,"DataView"),De=yt(Y,"Promise"),xe=yt(Y,"Set"),Or="[object Map]",Ta="[object Object]",Sr="[object Promise]",jr="[object Set]",Er="[object WeakMap]",Ar="[object DataView]",wa=gt(Ce),Oa=gt(Bt),Sa=gt(De),ja=gt(xe),Ea=gt(Ae),q=Et;(Ce&&q(new Ce(new ArrayBuffer(1)))!=Ar||Bt&&q(new Bt)!=Or||De&&q(De.resolve())!=Sr||xe&&q(new xe)!=jr||Ae&&q(new Ae)!=Er)&&(q=function(t){var e=Et(t),r=e==Ta?t.constructor:void 0,n=r?gt(r):"";if(n)switch(n){case wa:return Ar;case Oa:return Or;case Sa:return Sr;case ja:return jr;case Ea:return Er}return e});var Aa=Object.prototype,Ca=Aa.hasOwnProperty;function Da(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&Ca.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Cr=Y.Uint8Array;function Qe(t){var e=new t.constructor(t.byteLength);return new Cr(e).set(new Cr(t)),e}function xa(t,e){var r=e?Qe(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var Ma=/\w*$/;function Pa(t){var e=new t.constructor(t.source,Ma.exec(t));return e.lastIndex=t.lastIndex,e}var Dr=rt?rt.prototype:void 0,xr=Dr?Dr.valueOf:void 0;function Ia(t){return xr?Object(xr.call(t)):{}}function La(t,e){var r=e?Qe(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Na="[object Boolean]",Fa="[object Date]",Ra="[object Map]",Ua="[object Number]",Ha="[object RegExp]",Ba="[object Set]",za="[object String]",Wa="[object Symbol]",Ga="[object ArrayBuffer]",qa="[object DataView]",ka="[object Float32Array]",Ya="[object Float64Array]",Ka="[object Int8Array]",Ja="[object Int16Array]",Xa="[object Int32Array]",Za="[object Uint8Array]",Qa="[object Uint8ClampedArray]",Va="[object Uint16Array]",tc="[object Uint32Array]";function ec(t,e,r){var n=t.constructor;switch(e){case Ga:return Qe(t);case Na:case Fa:return new n(+t);case qa:return xa(t,r);case ka:case Ya:case Ka:case Ja:case Xa:case Za:case Qa:case Va:case tc:return La(t,r);case Ra:return new n;case Ua:case za:return new n(t);case Ha:return Pa(t);case Ba:return new n;case Wa:return Ia(t)}}function rc(t){return typeof t.constructor=="function"&&!ge(t)?Ss(zn(t)):{}}var nc="[object Map]";function ic(t){return At(t)&&q(t)==nc}var Mr=St&&St.isMap,sc=Mr?Ye(Mr):ic,oc="[object Set]";function ac(t){return At(t)&&q(t)==oc}var Pr=St&&St.isSet,cc=Pr?Ye(Pr):ac,uc=1,fc=2,hc=4,Yn="[object Arguments]",lc="[object Array]",dc="[object Boolean]",pc="[object Date]",gc="[object Error]",Kn="[object Function]",yc="[object GeneratorFunction]",mc="[object Map]",$c="[object Number]",Jn="[object Object]",bc="[object RegExp]",vc="[object Set]",_c="[object String]",Tc="[object Symbol]",wc="[object WeakMap]",Oc="[object ArrayBuffer]",Sc="[object DataView]",jc="[object Float32Array]",Ec="[object Float64Array]",Ac="[object Int8Array]",Cc="[object Int16Array]",Dc="[object Int32Array]",xc="[object Uint8Array]",Mc="[object Uint8ClampedArray]",Pc="[object Uint16Array]",Ic="[object Uint32Array]",A={};A[Yn]=A[lc]=A[Oc]=A[Sc]=A[dc]=A[pc]=A[jc]=A[Ec]=A[Ac]=A[Cc]=A[Dc]=A[mc]=A[$c]=A[Jn]=A[bc]=A[vc]=A[_c]=A[Tc]=A[xc]=A[Mc]=A[Pc]=A[Ic]=!0;A[gc]=A[Kn]=A[wc]=!1;function re(t,e,r,n,i,s){var o,a=e&uc,c=e&fc,u=e&hc;if(o!==void 0)return o;if(!lt(t))return t;var h=nt(t);if(h){if(o=Da(t),!a)return js(t,o)}else{var f=q(t),$=f==Kn||f==yc;if(ke(t))return da(t,a);if(f==Jn||f==Yn||$&&!i){if(o=c||$?{}:rc(t),!a)return c?ba(t,ha(o,t)):ma(t,fa(o,t))}else{if(!A[f])return i?t:{};o=ec(t,f,a)}}s||(s=new Ct);var b=s.get(t);if(b)return b;s.set(t,o),cc(t)?t.forEach(function(j){o.add(re(j,e,r,j,t,s))}):sc(t)&&t.forEach(function(j,P){o.set(P,re(j,e,r,P,t,s))});var w=u?c?_a:va:c?Je:Ke,g=h?void 0:w(t);return Es(g||t,function(j,P){g&&(P=j,j=t[P]),ze(o,P,re(j,e,r,P,t,s))}),o}var Lc=1,Nc=4;function Fc(t){return re(t,Lc|Nc)}function Rc(t,e,r){e=Un(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var o=Hn(e[n]);if(!(s=t!=null&&r(t,o)))break;t=t[o]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&We(i)&&Be(o,i)&&(nt(t)||qe(t)))}var Uc=Object.prototype,Hc=Uc.hasOwnProperty;function Bc(t,e){return t!=null&&Hc.call(t,e)}function zc(t,e){return t!=null&&Rc(t,e,Bc)}var Wc="[object Map]",Gc="[object Set]",qc=Object.prototype,kc=qc.hasOwnProperty;function Yc(t){if(t==null)return!0;if(Ge(t)&&(nt(t)||typeof t=="string"||typeof t.splice=="function"||ke(t)||Ln(t)||qe(t)))return!t.length;var e=q(t);if(e==Wc||e==Gc)return!t.size;if(ge(t))return!Rn(t).length;for(var r in t)if(kc.call(t,r))return!1;return!0}function Kc(t,e,r,n){if(!lt(t))return t;e=Un(e,t);for(var i=-1,s=e.length,o=s-1,a=t;a!=null&&++i<s;){var c=Hn(e[i]),u=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(i!=o){var h=a[c];u=void 0,u===void 0&&(u=lt(h)?h:Be(e[i+1])?[]:{})}ze(a,c,u),a=a[c]}return t}function Jc(t,e,r){return t==null?t:Kc(t,e,r)}var Xn={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(yn,function(){var r=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",c="hour",u="day",h="week",f="month",$="quarter",b="year",w="date",g="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,H={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(v){var p=["th","st","nd","rd"],l=v%100;return"["+v+(p[(l-20)%10]||p[l]||p[0])+"]"}},F=function(v,p,l){var y=String(v);return!y||y.length>=p?v:""+Array(p+1-y.length).join(l)+v},ot={s:F,z:function(v){var p=-v.utcOffset(),l=Math.abs(p),y=Math.floor(l/60),d=l%60;return(p<=0?"+":"-")+F(y,2,"0")+":"+F(d,2,"0")},m:function v(p,l){if(p.date()<l.date())return-v(l,p);var y=12*(l.year()-p.year())+(l.month()-p.month()),d=p.clone().add(y,f),_=l-d<0,T=p.clone().add(y+(_?-1:1),f);return+(-(y+(l-d)/(_?d-T:T-d))||0)},a:function(v){return v<0?Math.ceil(v)||0:Math.floor(v)},p:function(v){return{M:f,y:b,w:h,d:u,D:w,h:c,m:a,s:o,ms:s,Q:$}[v]||String(v||"").toLowerCase().replace(/s$/,"")},u:function(v){return v===void 0}},B="en",W={};W[B]=H;var vt="$isDayjsObject",Mt=function(v){return v instanceof Zt||!(!v||!v[vt])},Q=function v(p,l,y){var d;if(!p)return B;if(typeof p=="string"){var _=p.toLowerCase();W[_]&&(d=_),l&&(W[_]=l,d=_);var T=p.split("-");if(!d&&T.length>1)return v(T[0])}else{var E=p.name;W[E]=p,d=E}return!y&&d&&(B=d),d||!y&&B},I=function(v,p){if(Mt(v))return v.clone();var l=typeof p=="object"?p:{};return l.date=v,l.args=arguments,new Zt(l)},O=ot;O.l=Q,O.i=Mt,O.w=function(v,p){return I(v,{locale:p.$L,utc:p.$u,x:p.$x,$offset:p.$offset})};var Zt=function(){function v(l){this.$L=Q(l.locale,null,!0),this.parse(l),this.$x=this.$x||l.x||{},this[vt]=!0}var p=v.prototype;return p.parse=function(l){this.$d=function(y){var d=y.date,_=y.utc;if(d===null)return new Date(NaN);if(O.u(d))return new Date;if(d instanceof Date)return new Date(d);if(typeof d=="string"&&!/Z$/i.test(d)){var T=d.match(j);if(T){var E=T[2]-1||0,M=(T[7]||"0").substring(0,3);return _?new Date(Date.UTC(T[1],E,T[3]||1,T[4]||0,T[5]||0,T[6]||0,M)):new Date(T[1],E,T[3]||1,T[4]||0,T[5]||0,T[6]||0,M)}}return new Date(d)}(l),this.init()},p.init=function(){var l=this.$d;this.$y=l.getFullYear(),this.$M=l.getMonth(),this.$D=l.getDate(),this.$W=l.getDay(),this.$H=l.getHours(),this.$m=l.getMinutes(),this.$s=l.getSeconds(),this.$ms=l.getMilliseconds()},p.$utils=function(){return O},p.isValid=function(){return this.$d.toString()!==g},p.isSame=function(l,y){var d=I(l);return this.startOf(y)<=d&&d<=this.endOf(y)},p.isAfter=function(l,y){return I(l)<this.startOf(y)},p.isBefore=function(l,y){return this.endOf(y)<I(l)},p.$g=function(l,y,d){return O.u(l)?this[y]:this.set(d,l)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(l,y){var d=this,_=!!O.u(y)||y,T=O.p(l),E=function(ct,R){var V=O.w(d.$u?Date.UTC(d.$y,R,ct):new Date(d.$y,R,ct),d);return _?V:V.endOf(u)},M=function(ct,R){return O.w(d.toDate()[ct].apply(d.toDate("s"),(_?[0,0,0,0]:[23,59,59,999]).slice(R)),d)},L=this.$W,N=this.$M,z=this.$D,_t="set"+(this.$u?"UTC":"");switch(T){case b:return _?E(1,0):E(31,11);case f:return _?E(1,N):E(0,N+1);case h:var at=this.$locale().weekStart||0,Pt=(L<at?L+7:L)-at;return E(_?z-Pt:z+(6-Pt),N);case u:case w:return M(_t+"Hours",0);case c:return M(_t+"Minutes",1);case a:return M(_t+"Seconds",2);case o:return M(_t+"Milliseconds",3);default:return this.clone()}},p.endOf=function(l){return this.startOf(l,!1)},p.$set=function(l,y){var d,_=O.p(l),T="set"+(this.$u?"UTC":""),E=(d={},d[u]=T+"Date",d[w]=T+"Date",d[f]=T+"Month",d[b]=T+"FullYear",d[c]=T+"Hours",d[a]=T+"Minutes",d[o]=T+"Seconds",d[s]=T+"Milliseconds",d)[_],M=_===u?this.$D+(y-this.$W):y;if(_===f||_===b){var L=this.clone().set(w,1);L.$d[E](M),L.init(),this.$d=L.set(w,Math.min(this.$D,L.daysInMonth())).$d}else E&&this.$d[E](M);return this.init(),this},p.set=function(l,y){return this.clone().$set(l,y)},p.get=function(l){return this[O.p(l)]()},p.add=function(l,y){var d,_=this;l=Number(l);var T=O.p(y),E=function(N){var z=I(_);return O.w(z.date(z.date()+Math.round(N*l)),_)};if(T===f)return this.set(f,this.$M+l);if(T===b)return this.set(b,this.$y+l);if(T===u)return E(1);if(T===h)return E(7);var M=(d={},d[a]=n,d[c]=i,d[o]=r,d)[T]||1,L=this.$d.getTime()+l*M;return O.w(L,this)},p.subtract=function(l,y){return this.add(-1*l,y)},p.format=function(l){var y=this,d=this.$locale();if(!this.isValid())return d.invalidDate||g;var _=l||"YYYY-MM-DDTHH:mm:ssZ",T=O.z(this),E=this.$H,M=this.$m,L=this.$M,N=d.weekdays,z=d.months,_t=d.meridiem,at=function(R,V,It,Qt){return R&&(R[V]||R(y,_))||It[V].slice(0,Qt)},Pt=function(R){return O.s(E%12||12,R,"0")},ct=_t||function(R,V,It){var Qt=R<12?"AM":"PM";return It?Qt.toLowerCase():Qt};return _.replace(P,function(R,V){return V||function(It){switch(It){case"YY":return String(y.$y).slice(-2);case"YYYY":return O.s(y.$y,4,"0");case"M":return L+1;case"MM":return O.s(L+1,2,"0");case"MMM":return at(d.monthsShort,L,z,3);case"MMMM":return at(z,L);case"D":return y.$D;case"DD":return O.s(y.$D,2,"0");case"d":return String(y.$W);case"dd":return at(d.weekdaysMin,y.$W,N,2);case"ddd":return at(d.weekdaysShort,y.$W,N,3);case"dddd":return N[y.$W];case"H":return String(E);case"HH":return O.s(E,2,"0");case"h":return Pt(1);case"hh":return Pt(2);case"a":return ct(E,M,!0);case"A":return ct(E,M,!1);case"m":return String(M);case"mm":return O.s(M,2,"0");case"s":return String(y.$s);case"ss":return O.s(y.$s,2,"0");case"SSS":return O.s(y.$ms,3,"0");case"Z":return T}return null}(R)||T.replace(":","")})},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(l,y,d){var _,T=this,E=O.p(y),M=I(l),L=(M.utcOffset()-this.utcOffset())*n,N=this-M,z=function(){return O.m(T,M)};switch(E){case b:_=z()/12;break;case f:_=z();break;case $:_=z()/3;break;case h:_=(N-L)/6048e5;break;case u:_=(N-L)/864e5;break;case c:_=N/i;break;case a:_=N/n;break;case o:_=N/r;break;default:_=N}return d?_:O.a(_)},p.daysInMonth=function(){return this.endOf(f).$D},p.$locale=function(){return W[this.$L]},p.locale=function(l,y){if(!l)return this.$L;var d=this.clone(),_=Q(l,y,!0);return _&&(d.$L=_),d},p.clone=function(){return O.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},v}(),sr=Zt.prototype;return I.prototype=sr,[["$ms",s],["$s",o],["$m",a],["$H",c],["$W",u],["$M",f],["$y",b],["$D",w]].forEach(function(v){sr[v[1]]=function(p){return this.$g(p,v[0],v[1])}}),I.extend=function(v,p){return v.$i||(v(p,Zt,I),v.$i=!0),I},I.locale=Q,I.isDayjs=Mt,I.unix=function(v){return I(1e3*v)},I.en=W[B],I.Ls=W,I.p={},I})})(Xn);var Xc=Xn.exports;const Zc=Fe(Xc);var Zn={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(yn,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var c=o.prototype;a.utc=function(g){var j={date:g,utc:!0,args:arguments};return new o(j)},c.utc=function(g){var j=a(this.toDate(),{locale:this.$L,utc:!0});return g?j.add(this.utcOffset(),r):j},c.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=c.parse;c.parse=function(g){g.utc&&(this.$u=!0),this.$utils().u(g.$offset)||(this.$offset=g.$offset),u.call(this,g)};var h=c.init;c.init=function(){if(this.$u){var g=this.$d;this.$y=g.getUTCFullYear(),this.$M=g.getUTCMonth(),this.$D=g.getUTCDate(),this.$W=g.getUTCDay(),this.$H=g.getUTCHours(),this.$m=g.getUTCMinutes(),this.$s=g.getUTCSeconds(),this.$ms=g.getUTCMilliseconds()}else h.call(this)};var f=c.utcOffset;c.utcOffset=function(g,j){var P=this.$utils().u;if(P(g))return this.$u?0:P(this.$offset)?f.call(this):this.$offset;if(typeof g=="string"&&(g=function(B){B===void 0&&(B="");var W=B.match(n);if(!W)return null;var vt=(""+W[0]).match(i)||["-",0,0],Mt=vt[0],Q=60*+vt[1]+ +vt[2];return Q===0?0:Mt==="+"?Q:-Q}(g),g===null))return this;var H=Math.abs(g)<=16?60*g:g,F=this;if(j)return F.$offset=H,F.$u=g===0,F;if(g!==0){var ot=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(F=this.local().add(H+ot,r)).$offset=H,F.$x.$localOffset=ot}else F=this.utc();return F};var $=c.format;c.format=function(g){var j=g||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return $.call(this,j)},c.valueOf=function(){var g=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*g},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var b=c.toDate;c.toDate=function(g){return g==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():b.call(this)};var w=c.diff;c.diff=function(g,j,P){if(g&&this.$u===g.$u)return w.call(this,g,j,P);var H=this.local(),F=a(g).local();return w.call(H,F,j,P)}}})})(Zn);var Qc=Zn.exports;const Vc=Fe(Qc);var Ve=(t=>(t.CONTAINER="container",t.PAGE="page",t.ROOT="app",t.PAGE_FRAGMENT="page-fragment",t))(Ve||{}),ne=(t=>(t.COMP="comp",t.CODE="code",t.DATA_SOURCE="data-source",t))(ne||{}),Qn=(t=>(t.CODE="code",t))(Qn||{}),ie=(t=>(t.CODE="code",t.DATA_SOURCE_METHOD="data-source-method",t))(ie||{});Zc.extend(Vc);const Hp=(t="")=>t.replace(/\B([A-Z])/g,"-$1").toLowerCase(),Rt=(t,e=[])=>{const r=[],n=function(i,s){if(!Array.isArray(s))return null;for(let o=0,a=s.length;o<a;o++){const c=s[o];if(r.push(c),"".concat(c.id)==="".concat(i))return c;if(c.items){const u=n(i,c.items);if(u)return u}r.pop()}return null};return n(t,e),r},oe=t=>Object.prototype.toString.call(t)==="[object Object]",tu=t=>{var e;return t?((e=t.type)==null?void 0:e.toLowerCase())===Ve.PAGE:!1},eu=t=>{var e;return t?((e=t.type)==null?void 0:e.toLowerCase())===Ve.PAGE_FRAGMENT:!1},zt=(t="",e={})=>(Array.isArray(t)?t:t.replaceAll(/\[(\d+)\]/g,".$1").split(".")).reduce((n,i)=>{if(oe(n)||Array.isArray(n))return n[i]},e),Me=(t,e,r={})=>Jc(r,t,e),Se=(t,e=[])=>{const r=[],n=function(i,s){if(Array.isArray(s))for(let o=0,a=s.length;o<a;o++){const c=s[o],u=i.findIndex(h=>"".concat(h)==="".concat(c.id));u>-1&&(i.slice(u,1),r.push(c)),c.items&&n(i,c.items)}};return n(t,e),r},ru=(t={},e)=>Array.from(Object.values(t).reduce((r,n)=>{var i;return(((i=n[e])==null?void 0:i.keys)||[]).forEach(s=>r.add(s)),r},new Set)),Ir=(t={})=>Array.from(Object.values(t).reduce((e,r)=>(Object.keys(r).forEach(n=>{e.add(n)}),e),new Set)),Vn=(t,e,r)=>{var a;const n=Rt(t.id,e),i=n.pop();let s=n.pop();if(r&&(s=Rt(r,e).pop()),!i)throw new Error("未找到目标节点");if(!s)throw new Error("未找到父节点");const o=(a=s.items)==null?void 0:a.findIndex(c=>c.id===i.id);s.items.splice(o,1,t)},ti="__magic__",ei=(t,e,r={},n)=>{let i=[];if(!n)i=ru(r,e.id);else{const s=r[n];i=(s==null?void 0:s[e.id].keys)||[]}return i.forEach(s=>{const o="".concat(s).replaceAll(/\[(\d+)\]/g,".$1").split("."),a=o.map((f,$)=>$<o.length-1?f:"".concat(ti).concat(f)),c=zt(s,e);let u=zt(a,e);typeof u>"u"&&(Me(a.join("."),c,e),u=c);let h;try{h=t(u)}catch(f){console.error(f),h=""}Me(s,h,e)}),e},nu=(t,e,r,n=[])=>{var i,s;switch(typeof e=="string"&&typeof r>"u"&&(r=""),t){case"is":return e===r;case"not":return e!==r;case"=":return e===r;case"!=":return e!==r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r;case"between":return n.length>1&&e>=n[0]&&e<=n[1];case"not_between":return n.length<2||e<n[0]||e>n[1];case"include":return(i=e==null?void 0:e.includes)==null?void 0:i.call(e,r);case"not_include":return typeof e>"u"||!((s=e.includes)!=null&&s.call(e,r))}return!1},ri=t=>{const e={},r={string:void 0,object:{},array:[],boolean:void 0,number:void 0,null:null,any:void 0};return t.forEach(n=>{if(typeof n.defaultValue<"u"){if(n.type==="array"&&!Array.isArray(n.defaultValue)){e[n.name]=r.array;return}if(n.type==="object"&&!oe(n.defaultValue)){if(typeof n.defaultValue=="string"){try{e[n.name]=JSON.parse(n.defaultValue)}catch(i){e[n.name]=r.object}return}e[n.name]=r.object;return}e[n.name]=Fc(n.defaultValue);return}if(n.type==="object"){e[n.name]=n.fields?ri(n.fields):r.object;return}if(n.type){e[n.name]=r[n.type];return}e[n.name]=void 0}),e},ae="ds-field::";var et=(t=>(t.DEFAULT="default",t.CODE_BLOCK="code-block",t.DATA_SOURCE="data-source",t.DATA_SOURCE_METHOD="data-source-method",t.DATA_SOURCE_COND="data-source-cond",t.RELATED_COMP_WHEN_COPY="related-comp-when-copy",t))(et||{});class iu{constructor(e){m(this,"isTarget");m(this,"id");m(this,"name");m(this,"type",et.DEFAULT);m(this,"deps",{});m(this,"isCollectByDefault");var r;this.isTarget=e.isTarget,this.id=e.id,this.name=e.name,this.isCollectByDefault=(r=e.isCollectByDefault)!=null?r:!0,e.type&&(this.type=e.type),e.initialDeps&&(this.deps=e.initialDeps)}updateDep(e,r){const n=this.deps[e.id]||{name:e.name,keys:[]};e.name&&(n.name=e.name),this.deps[e.id]=n,n.keys.indexOf(r)===-1&&n.keys.push(r)}removeDep(e,r){if(!e){Object.keys(this.deps).forEach(i=>{delete this.deps[i]});return}const n=this.deps[e.id];if(n)if(r){const i=n.keys.indexOf(r);n.keys.splice(i,1),n.keys.length===0&&delete this.deps[e.id]}else delete this.deps[e.id]}hasDep(e,r){const n=this.deps[e.id];return!!(n!=null&&n.keys.find(i=>i===r))}destroy(){this.deps={}}}class su{constructor(e){m(this,"targetsList",{});e!=null&&e.initialTargets&&(this.targetsList=e.initialTargets)}getTargetsList(){return this.targetsList}getTargets(e=et.DEFAULT){return this.targetsList[e]||{}}addTarget(e){const r=this.getTargets(e.type)||{};this.targetsList[e.type]=r,r[e.id]=e}getTarget(e,r=et.DEFAULT){return this.getTargets(r)[e]}hasTarget(e,r=et.DEFAULT){return!!this.getTarget(e,r)}hasSpecifiedTypeTarget(e=et.DEFAULT){return Object.keys(this.getTargets(e)).length>0}removeTarget(e,r=et.DEFAULT){const n=this.getTargets(r);n[e]&&(n[e].destroy(),delete n[e])}removeTargets(e=et.DEFAULT){const r=this.targetsList[e];if(r){for(const n of Object.values(r))n.destroy();delete this.targetsList[e]}}clearTargets(){Object.keys(this.targetsList).forEach(e=>{delete this.targetsList[e]})}collect(e,r=!1,n){Object.values(this.targetsList).forEach(i=>{Object.values(i).forEach(s=>{!n&&!s.isCollectByDefault||n&&s.type!==n||e.forEach(o=>{s.removeDep(o),this.collectItem(o,s,r)})})})}clear(e){const r=[];Object.values(this.targetsList).forEach(n=>{Object.values(n).forEach(i=>{e?e.forEach(s=>{i.removeDep(s),Array.isArray(s.items)&&s.items.length&&!r.includes(s.id)&&(r.push(s.id),this.clear(s.items))}):i.removeDep()})})}clearByType(e,r){const n=[],i=this.getTargets(e);Object.values(i).forEach(s=>{r?r.forEach(o=>{s.removeDep(o),Array.isArray(o.items)&&o.items.length&&!n.includes(o.id)&&(n.push(o.id),this.clear(o.items))}):s.removeDep()})}collectItem(e,r,n=!1){const i=(s,o="")=>{const a=(c,u)=>{const h=c==="items",f=o?"".concat(o,".").concat(c):c;r.isTarget(f,u)?r.updateDep(e,f):!h&&Array.isArray(u)?u.forEach(($,b)=>{oe($)&&i($,"".concat(f,"[").concat(b,"]"))}):oe(u)&&i(u,f),h&&n&&Array.isArray(u)&&u.forEach($=>{this.collectItem($,r,n)})};Object.entries(s).forEach(([c,u])=>{typeof u>"u"||u===""||a(c,u)})};i(e)}}const ou=(t,e)=>typeof t=="string"&&t.includes("".concat(e))&&/\$\{([\s\S]+?)\}/.test(t),au=(t,e)=>{if(!Array.isArray(t)||typeof t[0]!="string")return!1;const[r]=t,n=r.indexOf(ae);return n===-1?!1:r.substring(n+ae.length)===e};var cu=typeof global=="object"&&global&&global.Object===Object&&global;const ni=cu;var uu=typeof self=="object"&&self&&self.Object===Object&&self,fu=ni||uu||Function("return this")();const K=fu;var hu=K.Symbol;const k=hu;var ii=Object.prototype,lu=ii.hasOwnProperty,du=ii.toString,Nt=k?k.toStringTag:void 0;function pu(t){var e=lu.call(t,Nt),r=t[Nt];try{t[Nt]=void 0;var n=!0}catch(s){}var i=du.call(t);return n&&(e?t[Nt]=r:delete t[Nt]),i}var gu=Object.prototype,yu=gu.toString;function mu(t){return yu.call(t)}var $u="[object Null]",bu="[object Undefined]",Lr=k?k.toStringTag:void 0;function st(t){return t==null?t===void 0?bu:$u:Lr&&Lr in Object(t)?pu(t):mu(t)}function X(t){return t!=null&&typeof t=="object"}var vu="[object Symbol]";function _u(t){return typeof t=="symbol"||X(t)&&st(t)==vu}function si(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Tu=Array.isArray;const Xt=Tu;var wu=1/0,Nr=k?k.prototype:void 0,Fr=Nr?Nr.toString:void 0;function oi(t){if(typeof t=="string")return t;if(Xt(t))return si(t,oi)+"";if(_u(t))return Fr?Fr.call(t):"";var e=t+"";return e=="0"&&1/t==-wu?"-0":e}function Dt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function ai(t){return t}var Ou="[object AsyncFunction]",Su="[object Function]",ju="[object GeneratorFunction]",Eu="[object Proxy]";function ci(t){if(!Dt(t))return!1;var e=st(t);return e==Su||e==ju||e==Ou||e==Eu}var Au=K["__core-js_shared__"];const je=Au;var Rr=function(){var t=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Cu(t){return!!Rr&&Rr in t}var Du=Function.prototype,xu=Du.toString;function mt(t){if(t!=null){try{return xu.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var Mu=/[\\^$.*+?()[\]{}|]/g,Pu=/^\[object .+?Constructor\]$/,Iu=Function.prototype,Lu=Object.prototype,Nu=Iu.toString,Fu=Lu.hasOwnProperty,Ru=RegExp("^"+Nu.call(Fu).replace(Mu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Uu(t){if(!Dt(t)||Cu(t))return!1;var e=ci(t)?Ru:Pu;return e.test(mt(t))}function Hu(t,e){return t==null?void 0:t[e]}function $t(t,e){var r=Hu(t,e);return Uu(r)?r:void 0}var Bu=$t(K,"WeakMap");const Pe=Bu;var Ur=Object.create,zu=function(){function t(){}return function(e){if(!Dt(e))return{};if(Ur)return Ur(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Wu=zu;function ui(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Gu(){}var qu=800,ku=16,Yu=Date.now;function Ku(t){var e=0,r=0;return function(){var n=Yu(),i=ku-(n-r);if(r=n,i>0){if(++e>=qu)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Ju(t){return function(){return t}}var Xu=function(){try{var t=$t(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();const ce=Xu;var Zu=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:Ju(e),writable:!0})}:ai;const Qu=Zu;var Vu=Ku(Qu);const tf=Vu;function ef(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function rf(t,e,r,n){for(var i=t.length,s=r+-1;++s<i;)if(e(t[s],s,t))return s;return-1}function nf(t){return t!==t}function sf(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function of(t,e,r){return e===e?sf(t,e,r):rf(t,nf,r)}function af(t,e){var r=t==null?0:t.length;return!!r&&of(t,e,0)>-1}var cf=9007199254740991,uf=/^(?:0|[1-9]\d*)$/;function fi(t,e){var r=typeof t;return e=e==null?cf:e,!!e&&(r=="number"||r!="symbol"&&uf.test(t))&&t>-1&&t%1==0&&t<e}function hi(t,e,r){e=="__proto__"&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function $e(t,e){return t===e||t!==t&&e!==e}var ff=Object.prototype,hf=ff.hasOwnProperty;function li(t,e,r){var n=t[e];(!(hf.call(t,e)&&$e(n,r))||r===void 0&&!(e in t))&&hi(t,e,r)}function lf(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=n?n(r[a],t[a],a,r,t):void 0;c===void 0&&(c=t[a]),i?hi(r,a,c):li(r,a,c)}return r}var Hr=Math.max;function df(t,e,r){return e=Hr(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=Hr(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),ui(t,this,a)}}function tr(t,e){return tf(df(t,e,ai),t+"")}var pf=9007199254740991;function di(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=pf}function be(t){return t!=null&&di(t.length)&&!ci(t)}function gf(t,e,r){if(!Dt(r))return!1;var n=typeof e;return(n=="number"?be(r)&&fi(e,r.length):n=="string"&&e in r)?$e(r[e],t):!1}function yf(t){return tr(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&gf(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,s)}return e})}var mf=Object.prototype;function er(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||mf;return t===r}function $f(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var bf="[object Arguments]";function Br(t){return X(t)&&st(t)==bf}var pi=Object.prototype,vf=pi.hasOwnProperty,_f=pi.propertyIsEnumerable,Tf=Br(function(){return arguments}())?Br:function(t){return X(t)&&vf.call(t,"callee")&&!_f.call(t,"callee")};const gi=Tf;function wf(){return!1}var yi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zr=yi&&typeof module=="object"&&module&&!module.nodeType&&module,Of=zr&&zr.exports===yi,Wr=Of?K.Buffer:void 0,Sf=Wr?Wr.isBuffer:void 0,jf=Sf||wf;const mi=jf;var Ef="[object Arguments]",Af="[object Array]",Cf="[object Boolean]",Df="[object Date]",xf="[object Error]",Mf="[object Function]",Pf="[object Map]",If="[object Number]",Lf="[object Object]",Nf="[object RegExp]",Ff="[object Set]",Rf="[object String]",Uf="[object WeakMap]",Hf="[object ArrayBuffer]",Bf="[object DataView]",zf="[object Float32Array]",Wf="[object Float64Array]",Gf="[object Int8Array]",qf="[object Int16Array]",kf="[object Int32Array]",Yf="[object Uint8Array]",Kf="[object Uint8ClampedArray]",Jf="[object Uint16Array]",Xf="[object Uint32Array]",x={};x[zf]=x[Wf]=x[Gf]=x[qf]=x[kf]=x[Yf]=x[Kf]=x[Jf]=x[Xf]=!0;x[Ef]=x[Af]=x[Hf]=x[Cf]=x[Bf]=x[Df]=x[xf]=x[Mf]=x[Pf]=x[If]=x[Lf]=x[Nf]=x[Ff]=x[Rf]=x[Uf]=!1;function Zf(t){return X(t)&&di(t.length)&&!!x[st(t)]}function rr(t){return function(e){return t(e)}}var $i=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ut=$i&&typeof module=="object"&&module&&!module.nodeType&&module,Qf=Ut&&Ut.exports===$i,Ee=Qf&&ni.process,Vf=function(){try{var t=Ut&&Ut.require&&Ut.require("util").types;return t||Ee&&Ee.binding&&Ee.binding("util")}catch(e){}}();const jt=Vf;var Gr=jt&&jt.isTypedArray,th=Gr?rr(Gr):Zf;const eh=th;var rh=Object.prototype,nh=rh.hasOwnProperty;function bi(t,e){var r=Xt(t),n=!r&&gi(t),i=!r&&!n&&mi(t),s=!r&&!n&&!i&&eh(t),o=r||n||i||s,a=o?$f(t.length,String):[],c=a.length;for(var u in t)(e||nh.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||fi(u,c)))&&a.push(u);return a}function vi(t,e){return function(r){return t(e(r))}}var ih=vi(Object.keys,Object);const sh=ih;var oh=Object.prototype,ah=oh.hasOwnProperty;function ch(t){if(!er(t))return sh(t);var e=[];for(var r in Object(t))ah.call(t,r)&&r!="constructor"&&e.push(r);return e}function _i(t){return be(t)?bi(t):ch(t)}function uh(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var fh=Object.prototype,hh=fh.hasOwnProperty;function lh(t){if(!Dt(t))return uh(t);var e=er(t),r=[];for(var n in t)n=="constructor"&&(e||!hh.call(t,n))||r.push(n);return r}function dh(t){return be(t)?bi(t,!0):lh(t)}var ph=yf(function(t,e,r,n){lf(e,dh(e),t,n)});const qr=ph;var gh=$t(Object,"create");const Wt=gh;function yh(){this.__data__=Wt?Wt(null):{},this.size=0}function mh(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $h="__lodash_hash_undefined__",bh=Object.prototype,vh=bh.hasOwnProperty;function _h(t){var e=this.__data__;if(Wt){var r=e[t];return r===$h?void 0:r}return vh.call(e,t)?e[t]:void 0}var Th=Object.prototype,wh=Th.hasOwnProperty;function Oh(t){var e=this.__data__;return Wt?e[t]!==void 0:wh.call(e,t)}var Sh="__lodash_hash_undefined__";function jh(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Wt&&e===void 0?Sh:e,this}function pt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}pt.prototype.clear=yh;pt.prototype.delete=mh;pt.prototype.get=_h;pt.prototype.has=Oh;pt.prototype.set=jh;function Eh(){this.__data__=[],this.size=0}function ve(t,e){for(var r=t.length;r--;)if($e(t[r][0],e))return r;return-1}var Ah=Array.prototype,Ch=Ah.splice;function Dh(t){var e=this.__data__,r=ve(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ch.call(e,r,1),--this.size,!0}function xh(t){var e=this.__data__,r=ve(e,t);return r<0?void 0:e[r][1]}function Mh(t){return ve(this.__data__,t)>-1}function Ph(t,e){var r=this.__data__,n=ve(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function Z(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Z.prototype.clear=Eh;Z.prototype.delete=Dh;Z.prototype.get=xh;Z.prototype.has=Mh;Z.prototype.set=Ph;var Ih=$t(K,"Map");const Gt=Ih;function Lh(){this.size=0,this.__data__={hash:new pt,map:new(Gt||Z),string:new pt}}function Nh(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function _e(t,e){var r=t.__data__;return Nh(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Fh(t){var e=_e(this,t).delete(t);return this.size-=e?1:0,e}function Rh(t){return _e(this,t).get(t)}function Uh(t){return _e(this,t).has(t)}function Hh(t,e){var r=_e(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function bt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}bt.prototype.clear=Lh;bt.prototype.delete=Fh;bt.prototype.get=Rh;bt.prototype.has=Uh;bt.prototype.set=Hh;function Ti(t){return t==null?"":oi(t)}function wi(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var kr=k?k.isConcatSpreadable:void 0;function Bh(t){return Xt(t)||gi(t)||!!(kr&&t&&t[kr])}function zh(t,e,r,n,i){var s=-1,o=t.length;for(r||(r=Bh),i||(i=[]);++s<o;){var a=t[s];r(a)&&wi(i,a)}return i}var Wh=vi(Object.getPrototypeOf,Object);const Oi=Wh;var Gh="[object Object]",qh=Function.prototype,kh=Object.prototype,Si=qh.toString,Yh=kh.hasOwnProperty,Kh=Si.call(Object);function Jh(t){if(!X(t)||st(t)!=Gh)return!1;var e=Oi(t);if(e===null)return!0;var r=Yh.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Si.call(r)==Kh}var Xh="[object DOMException]",Zh="[object Error]";function ji(t){if(!X(t))return!1;var e=st(t);return e==Zh||e==Xh||typeof t.message=="string"&&typeof t.name=="string"&&!Jh(t)}var Qh=tr(function(t,e){try{return ui(t,void 0,e)}catch(r){return ji(r)?r:new Error(r)}});const Vh=Qh;function tl(t){return function(e){return t==null?void 0:t[e]}}function el(){this.__data__=new Z,this.size=0}function rl(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function nl(t){return this.__data__.get(t)}function il(t){return this.__data__.has(t)}var sl=200;function ol(t,e){var r=this.__data__;if(r instanceof Z){var n=r.__data__;if(!Gt||n.length<sl-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new bt(n)}return r.set(t,e),this.size=r.size,this}function xt(t){var e=this.__data__=new Z(t);this.size=e.size}xt.prototype.clear=el;xt.prototype.delete=rl;xt.prototype.get=nl;xt.prototype.has=il;xt.prototype.set=ol;var Ei=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Yr=Ei&&typeof module=="object"&&module&&!module.nodeType&&module,al=Yr&&Yr.exports===Ei,Kr=al?K.Buffer:void 0;Kr&&Kr.allocUnsafe;function cl(t,e){return t.slice()}function ul(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}function fl(){return[]}var hl=Object.prototype,ll=hl.propertyIsEnumerable,Jr=Object.getOwnPropertySymbols,dl=Jr?function(t){return t==null?[]:(t=Object(t),ul(Jr(t),function(e){return ll.call(t,e)}))}:fl;const pl=dl;function gl(t,e,r){var n=e(t);return Xt(t)?n:wi(n,r(t))}function yl(t){return gl(t,_i,pl)}var ml=$t(K,"DataView");const Ie=ml;var $l=$t(K,"Promise");const Le=$l;var bl=$t(K,"Set");const wt=bl;var Xr="[object Map]",vl="[object Object]",Zr="[object Promise]",Qr="[object Set]",Vr="[object WeakMap]",tn="[object DataView]",_l=mt(Ie),Tl=mt(Gt),wl=mt(Le),Ol=mt(wt),Sl=mt(Pe),ut=st;(Ie&&ut(new Ie(new ArrayBuffer(1)))!=tn||Gt&&ut(new Gt)!=Xr||Le&&ut(Le.resolve())!=Zr||wt&&ut(new wt)!=Qr||Pe&&ut(new Pe)!=Vr)&&(ut=function(t){var e=st(t),r=e==vl?t.constructor:void 0,n=r?mt(r):"";if(n)switch(n){case _l:return tn;case Tl:return Xr;case wl:return Zr;case Ol:return Qr;case Sl:return Vr}return e});const nr=ut;var jl=Object.prototype,El=jl.hasOwnProperty;function Al(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&El.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Cl=K.Uint8Array;const en=Cl;function ir(t){var e=new t.constructor(t.byteLength);return new en(e).set(new en(t)),e}function Dl(t,e){var r=ir(t.buffer);return new t.constructor(r,t.byteOffset,t.byteLength)}var xl=/\w*$/;function Ml(t){var e=new t.constructor(t.source,xl.exec(t));return e.lastIndex=t.lastIndex,e}var rn=k?k.prototype:void 0,nn=rn?rn.valueOf:void 0;function Pl(t){return nn?Object(nn.call(t)):{}}function Il(t,e){var r=ir(t.buffer);return new t.constructor(r,t.byteOffset,t.length)}var Ll="[object Boolean]",Nl="[object Date]",Fl="[object Map]",Rl="[object Number]",Ul="[object RegExp]",Hl="[object Set]",Bl="[object String]",zl="[object Symbol]",Wl="[object ArrayBuffer]",Gl="[object DataView]",ql="[object Float32Array]",kl="[object Float64Array]",Yl="[object Int8Array]",Kl="[object Int16Array]",Jl="[object Int32Array]",Xl="[object Uint8Array]",Zl="[object Uint8ClampedArray]",Ql="[object Uint16Array]",Vl="[object Uint32Array]";function td(t,e,r){var n=t.constructor;switch(e){case Wl:return ir(t);case Ll:case Nl:return new n(+t);case Gl:return Dl(t);case ql:case kl:case Yl:case Kl:case Jl:case Xl:case Zl:case Ql:case Vl:return Il(t);case Fl:return new n;case Rl:case Bl:return new n(t);case Ul:return Ml(t);case Hl:return new n;case zl:return Pl(t)}}function ed(t){return typeof t.constructor=="function"&&!er(t)?Wu(Oi(t)):{}}var rd="[object Map]";function nd(t){return X(t)&&nr(t)==rd}var sn=jt&&jt.isMap,id=sn?rr(sn):nd;const sd=id;var od="[object Set]";function ad(t){return X(t)&&nr(t)==od}var on=jt&&jt.isSet,cd=on?rr(on):ad;const ud=cd;var Ai="[object Arguments]",fd="[object Array]",hd="[object Boolean]",ld="[object Date]",dd="[object Error]",Ci="[object Function]",pd="[object GeneratorFunction]",gd="[object Map]",yd="[object Number]",Di="[object Object]",md="[object RegExp]",$d="[object Set]",bd="[object String]",vd="[object Symbol]",_d="[object WeakMap]",Td="[object ArrayBuffer]",wd="[object DataView]",Od="[object Float32Array]",Sd="[object Float64Array]",jd="[object Int8Array]",Ed="[object Int16Array]",Ad="[object Int32Array]",Cd="[object Uint8Array]",Dd="[object Uint8ClampedArray]",xd="[object Uint16Array]",Md="[object Uint32Array]",C={};C[Ai]=C[fd]=C[Td]=C[wd]=C[hd]=C[ld]=C[Od]=C[Sd]=C[jd]=C[Ed]=C[Ad]=C[gd]=C[yd]=C[Di]=C[md]=C[$d]=C[bd]=C[vd]=C[Cd]=C[Dd]=C[xd]=C[Md]=!0;C[dd]=C[Ci]=C[_d]=!1;function se(t,e,r,n,i,s){var o;if(o!==void 0)return o;if(!Dt(t))return t;var a=Xt(t);if(a)o=Al(t);else{var c=nr(t),u=c==Ci||c==pd;if(mi(t))return cl(t);if(c==Di||c==Ai||u&&!i)o=u?{}:ed(t);else{if(!C[c])return i?t:{};o=td(t,c)}}s||(s=new xt);var h=s.get(t);if(h)return h;s.set(t,o),ud(t)?t.forEach(function(b){o.add(se(b,e,r,b,t,s))}):sd(t)&&t.forEach(function(b,w){o.set(w,se(b,e,r,w,t,s))});var f=yl,$=a?void 0:f(t);return ef($||t,function(b,w){$&&(w=b,b=t[w]),li(o,w,se(b,e,r,w,t,s))}),o}var Pd=1,Id=4;function xi(t){return se(t,Pd|Id)}var Ld="__lodash_hash_undefined__";function Nd(t){return this.__data__.set(t,Ld),this}function Fd(t){return this.__data__.has(t)}function ue(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new bt;++e<r;)this.add(t[e])}ue.prototype.add=ue.prototype.push=Nd;ue.prototype.has=Fd;function Rd(t,e){return t.has(e)}function Mi(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}function Ud(t){return X(t)&&be(t)}var Hd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bd=tl(Hd);const zd=Bd;var Pi=/[&<>"']/g,Wd=RegExp(Pi.source);function Gd(t){return t=Ti(t),t&&Wd.test(t)?t.replace(Pi,zd):t}function qd(t,e){return si(e,function(r){return t[r]})}var Ii=Object.prototype,kd=Ii.hasOwnProperty;function an(t,e,r,n){return t===void 0||$e(t,Ii[r])&&!kd.call(n,r)?e:t}var Yd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Kd(t){return"\\"+Yd[t]}var Jd=/<%=([\s\S]+?)%>/g;const Li=Jd;var Xd=/<%-([\s\S]+?)%>/g;const Zd=Xd;var Qd=/<%([\s\S]+?)%>/g;const Vd=Qd;var tp={escape:Zd,evaluate:Vd,interpolate:Li,variable:"",imports:{_:{escape:Gd}}};const cn=tp;var ep="Invalid `variable` option passed into `_.template`",rp=/\b__p \+= '';/g,np=/\b(__p \+=) '' \+/g,ip=/(__e\(.*?\)|\b__t\)) \+\n'';/g,sp=/[()=,{}\[\]\/\s]/,op=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vt=/($^)/,ap=/['\n\r\u2028\u2029\\]/g,cp=Object.prototype,un=cp.hasOwnProperty;function fn(t,e,r){var n=cn.imports._.templateSettings||cn;t=Ti(t),e=qr({},e,n,an);var i=qr({},e.imports,n.imports,an),s=_i(i),o=qd(i,s),a,c,u=0,h=e.interpolate||Vt,f="__p += '",$=RegExp((e.escape||Vt).source+"|"+h.source+"|"+(h===Li?op:Vt).source+"|"+(e.evaluate||Vt).source+"|$","g"),b=un.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace($,function(j,P,H,F,ot,B){return H||(H=F),f+=t.slice(u,B).replace(ap,Kd),P&&(a=!0,f+="' +\n__e("+P+") +\n'"),ot&&(c=!0,f+="';\n"+ot+";\n__p += '"),H&&(f+="' +\n((__t = ("+H+")) == null ? '' : __t) +\n'"),u=B+j.length,j}),f+="';\n";var w=un.call(e,"variable")&&e.variable;if(!w)f="with (obj) {\n"+f+"\n}\n";else if(sp.test(w))throw new Error(ep);f=(c?f.replace(rp,""):f).replace(np,"$1").replace(ip,"$1;"),f="function("+(w||"obj")+") {\n"+(w?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Vh(function(){return Function(s,b+"return "+f).apply(void 0,o)});if(g.source=f,ji(g))throw g;return g}var up=1/0,fp=wt&&1/Mi(new wt([,-0]))[1]==up?function(t){return new wt(t)}:Gu;const hp=fp;var lp=200;function dp(t,e,r){var n=-1,i=af,s=t.length,o=!0,a=[],c=a;if(s>=lp){var u=hp(t);if(u)return Mi(u);o=!1,i=Rd,c=new ue}else c=a;t:for(;++n<s;){var h=t[n],f=h;if(h=h!==0?h:0,o&&f===f){for(var $=c.length;$--;)if(c[$]===f)continue t;a.push(h)}else i(c,f,r)||(c!==a&&c.push(f),a.push(h))}return a}var pp=tr(function(t){return dp(zh(t,1,Ud))});const gp=pp;var he,qt,kt,ht,Yt;class Ni extends Sn{constructor(r){var n,i,s,o;super();m(this,"isInit",!1);m(this,"data",{});m(this,"app");m(this,"mockData");G(this,he,"base");G(this,qt,void 0);G(this,kt,void 0);G(this,ht,[]);G(this,Yt,[]);tt(this,qt,r.schema.id),tt(this,kt,r.schema),this.app=r.app,this.setFields(r.schema.fields),this.setMethods(r.schema.methods||[]),this.app.platform==="editor"?(this.mockData=((i=(n=r.schema.mocks)==null?void 0:n.find(a=>a.useInEditor))==null?void 0:i.data)||this.getDefaultData(),this.setData(this.mockData)):typeof r.useMock=="boolean"&&r.useMock?(this.mockData=((o=(s=r.schema.mocks)==null?void 0:s.find(a=>a.enable))==null?void 0:o.data)||this.getDefaultData(),this.setData(this.mockData)):r.initialData?(this.setData(r.initialData),this.isInit=!0):this.setData(this.getDefaultData())}get id(){return U(this,qt)}get type(){return U(this,he)}get schema(){return U(this,kt)}get fields(){return U(this,ht)}get methods(){return U(this,Yt)}setFields(r){tt(this,ht,r)}setMethods(r){tt(this,Yt,r)}setData(r,n){n?Me(n,r,this.data):this.data=r;const i={updateData:r,path:n};this.emit("change",i)}getDefaultData(){return ri(U(this,ht))}async init(){this.isInit=!0}destroy(){this.data={},tt(this,ht,[]),this.removeAllListeners()}}he=new WeakMap,qt=new WeakMap,kt=new WeakMap,ht=new WeakMap,Yt=new WeakMap;const hn=t=>Object.entries(t).reduce((e,[r,n])=>{let i=n;return typeof n=="object"&&(i=JSON.stringify(n)),typeof n<"u"?"".concat(e).concat(e?"&":"").concat(globalThis.encodeURIComponent(r),"=").concat(globalThis.encodeURIComponent("".concat(i))):e},""),yp=async t=>{var h;const{url:e,method:r="GET",headers:n={},params:i={},data:s={},...o}=t,a=hn(i);let c=JSON.stringify(s);return(h=n["Content-Type"])!=null&&h.includes("application/x-www-form-urlencoded")&&(c=hn(s)),(await globalThis.fetch(a?"".concat(e,"?").concat(a):e,{method:r,headers:n,body:r==="GET"?void 0:c,...o})).json()};var Ot,Kt,Jt,le;class mp extends Ni{constructor(r){const{options:n}=r.schema;super(r);m(this,"isLoading",!1);m(this,"error");m(this,"httpOptions");G(this,Ot,void 0);G(this,Kt,[]);G(this,Jt,[]);G(this,le,"http");this.httpOptions=n,typeof r.request=="function"?tt(this,Ot,r.request):typeof globalThis.fetch=="function"&&tt(this,Ot,yp),this.methods.forEach(i=>{typeof i.content=="function"&&(i.timing==="beforeRequest"&&U(this,Kt).push(i.content),i.timing==="afterRequest"&&U(this,Jt).push(i.content))})}get type(){return U(this,le)}async init(){this.schema.autoFetch&&await this.request(this.httpOptions),super.init()}async request(r={}){var i,s;this.isLoading=!0;let n={...this.httpOptions,...r};try{for(const a of U(this,Kt))await a({options:n,params:{},dataSource:this,app:this.app});typeof this.schema.beforeRequest=="function"&&(n=this.schema.beforeRequest(n,{app:this.app,dataSource:this}));let o=this.mockData?this.mockData:await((i=U(this,Ot))==null?void 0:i.call(this,n));for(const a of U(this,Jt))await a({res:o,options:n,params:{},dataSource:this,app:this.app});if(typeof this.schema.afterResponse=="function"&&(o=this.schema.afterResponse(o,{app:this.app,dataSource:this,options:n})),(s=this.schema.responseOptions)!=null&&s.dataPath){const a=zt(this.schema.responseOptions.dataPath,o);this.setData(a)}else this.setData(o);this.error=void 0}catch(o){this.error={msg:o.message},this.emit("error",o)}this.isLoading=!1}get(r){return this.request({...r,method:"GET"})}post(r){return this.request({...r,method:"POST"})}}Ot=new WeakMap,Kt=new WeakMap,Jt=new WeakMap,le=new WeakMap;const $p=(t,e)=>{if(!t.displayConds||!Array.isArray(t.displayConds)||!t.displayConds.length)return!0;for(const{cond:r}of t.displayConds){if(!r)continue;let n=!0;for(const{op:i,value:s,range:o,field:a}of r){const[c,...u]=a;if(!e[c]||!u.length)break;const f=zt(u.join("."),e[c]);if(!nu(i,f,s,o)){n=!1;break}}if(n)return!0}return!1},ln=(t,e)=>{var r;if(tu(t)||eu(t)){const n=(r=e.items)==null?void 0:r.findIndex(i=>i.id===t.id);e.items.splice(n,1,t)}else Vn(t,e.items)},bp=(t,e,r=[])=>{const n={[e]:{}};return r.reduce((i,s,o)=>(i[s]=o===r.length-1?t:{},i[s]),n[e]),n},vp=(t,e)=>{const[r,...n]=t,i=r.indexOf(ae);if(i>-1){const s=r.substring(i+ae.length),o=e[s];return o?zt(n.join("."),o):t}return t},Fi=(t,e)=>typeof t=="string"?fn(t)(e):t!=null&&t.isBindDataSource&&t.dataSourceId?e[t.dataSourceId]:t!=null&&t.isBindDataSourceField&&t.dataSourceId&&typeof t.template=="string"?fn(t.template)(e[t.dataSourceId]):Array.isArray(t)&&typeof t[0]=="string"?vp(t,e):t,_p=(t,e,r,n=[])=>{const i=new su;i.addTarget(new iu({id:r,isTarget:(o,a)=>"".concat(o).startsWith(ti)?!1:ou(a,r)||au(a,r)})),i.collect(e,!0);const{deps:s}=i.getTarget(r);return Object.keys(s).length?e.map(o=>{var a;return(a=s[o.id])!=null&&a.keys.length?ei(c=>{const u=bp(t,r,n);return Fi(c,u)},xi(o),{[r]:s},r):o}):e},ft=class ft extends Sn{constructor({app:r,useMock:n,initialData:i}){var o,a;super();m(this,"app");m(this,"dataSourceMap",new Map);m(this,"data",{});m(this,"useMock",!1);this.app=r,this.useMock=n,i&&(this.data=i),(a=(o=r.dsl)==null?void 0:o.dataSources)==null||a.forEach(c=>{this.addDataSource(c)});const s=Array.from(this.dataSourceMap);Promise.allSettled(s.map(([,c])=>this.init(c))).then(c=>{const u={};c.forEach((h,f)=>{if(h.status==="fulfilled"){const $=s[f][0];u[$]=this.data[$]}}),this.emit("init",u)})}static register(r,n){ft.dataSourceClassMap.set(r,n)}static registe(r,n){ft.register(r,n)}static getDataSourceClass(r){return ft.dataSourceClassMap.get(r)}async init(r){var s;if(r.isInit||this.app.jsEngine&&((s=r.schema.disabledInitInJsEngine)!=null&&s.includes(this.app.jsEngine)))return;const n=[],i=[];r.methods.forEach(o=>{typeof o.content=="function"&&(o.timing==="beforeInit"&&n.push(o.content),o.timing==="afterInit"&&i.push(o.content))});for(const o of n)await o({params:{},dataSource:r,app:this.app});await r.init();for(const o of i)await o({params:{},dataSource:r,app:this.app})}get(r){return this.dataSourceMap.get(r)}async addDataSource(r){if(!r)return;const n=ft.dataSourceClassMap.get(r.type)||Ni,i=new n({app:this.app,schema:r,request:this.app.request,useMock:this.useMock,initialData:this.data[r.id]});this.dataSourceMap.set(r.id,i),this.data[i.id]=i.data,i.on("change",s=>{this.setData(i,s)})}setData(r,n){this.data[r.id]=r.data,this.emit("change",r.id,n)}removeDataSource(r){var n;(n=this.get(r))==null||n.destroy(),delete this.data[r],this.dataSourceMap.delete(r)}updateSchema(r){r.forEach(n=>{if(!this.get(n.id))return;this.removeDataSource(n.id),this.addDataSource(n);const s=this.get(n.id);s&&this.init(s)})}compiledNode({items:r,...n},i,s=!1){var a;const o=xi(n);return r&&(o.items=Array.isArray(r)&&s?r.map(c=>this.compiledNode(c,i,s)):r),n.condResult===!1||n.visible===!1?o:ei(c=>Fi(c,this.data),o,((a=this.app.dsl)==null?void 0:a.dataSourceDeps)||{},i)}compliedConds(r){return $p(r,this.data)}compliedIteratorItems(r,n,i=[]){const[s,...o]=i;return this.get(s)?_p(r,n,s,o):n}destroy(){this.removeAllListeners(),this.data={},this.dataSourceMap.forEach(r=>{r.destroy()}),this.dataSourceMap.clear()}};m(ft,"dataSourceClassMap",new Map);let fe=ft;fe.register("http",mp);const Ri=fe,Tp=(t,e,r)=>{const{dsl:n,platform:i}=t;if(!(n!=null&&n.dataSources))return;const s=new Ri({app:t,useMock:e,initialData:r});return n.dataSources&&n.dataSourceCondDeps&&i!=="editor"&&Se(Ir(n.dataSourceCondDeps),n.items).forEach(o=>{o.condResult=s.compliedConds(o),ln(o,n)}),n.dataSources&&n.dataSourceDeps&&Se(Ir(n.dataSourceDeps),n.items).forEach(o=>{ln(s.compiledNode(o),n)}),t.jsEngine!=="nodejs"&&s.on("change",(o,a)=>{var f,$;const c=((f=n.dataSourceDeps)==null?void 0:f[o])||{},u=(($=n.dataSourceCondDeps)==null?void 0:$[o])||{},h=gp([...Object.keys(u),...Object.keys(c)]);s.emit("update-data",Se(h,n.items).map(b=>(t.platform!=="editor"&&(b.condResult=s.compliedConds(b)),s.compiledNode(b))),o,a)}),s};class wp{constructor(e=globalThis.navigator.userAgent,r={}){m(this,"isIos",!1);m(this,"isIphone",!1);m(this,"isIpad",!1);m(this,"isAndroid",!1);m(this,"isAndroidPad",!1);m(this,"isMac",!1);m(this,"isWin",!1);m(this,"isMqq",!1);m(this,"isWechat",!1);m(this,"isWeb",!1);this.isIphone=e.indexOf("iPhone")>=0,this.isIpad=/(iPad).*OS\s([\d_]+)/.test(e),this.isIos=this.isIphone||this.isIpad,this.isAndroid=e.indexOf("Android")>=0,this.isAndroidPad=this.isAndroid&&e.indexOf("Mobile")<0,this.isMac=e.indexOf("Macintosh")>=0,this.isWin=e.indexOf("Windows")>=0,this.isMqq=/QQ\/([\d.]+)/.test(e),this.isWechat=e.indexOf("MicroMessenger")>=0&&e.indexOf("wxwork")<0,this.isWeb=!this.isIos&&!this.isAndroid&&!/(WebOS|BlackBerry)/.test(e),Object.entries(r).forEach(([n,i])=>{this[n]=i})}}const dn=wp,pn="magic:common:events:",Ui="magic:common:actions:",te={SHOW:"show",HIDE:"hide",SCROLL_TO_VIEW:"scrollIntoView",SCROLL_TO_TOP:"scrollToTop"},Op=t=>t.startsWith(pn)?t:"".concat(pn).concat(t),Sp=t=>t.startsWith(Ui),Hi=(t,e)=>{var n;if(!t)return!1;if(!t.id)return Hi(t.parentElement,e);const r=(n=e.page)==null?void 0:n.getNode(t.id);return r||!1},gn=(t,e,r)=>{const n=Hi(r.target,t);n&&t.emit(Op(e),n)},jp=t=>{t.jsEngine==="browser"&&(window.document.body.addEventListener("click",e=>{gn(t,"click",e)}),window.document.body.addEventListener("click",e=>{gn(t,"click:capture",e)},!0))},Ep=(t,e)=>{var n;const{instance:r}=e;if(r)switch(t.replace(Ui,"")){case te.SHOW:r.show();break;case te.HIDE:r.hide();break;case te.SCROLL_TO_VIEW:(n=r.$el)==null||n.scrollIntoView({behavior:"smooth"});break;case te.SCROLL_TO_TOP:window.scrollTo({top:0,behavior:"smooth"});break}};class Ap{constructor(){m(this,"data",{})}set(e,r){this.data[e]=r}get(e){return this.data[e]}}class Cp extends Ue.EventEmitter{constructor(r){super();m(this,"data");m(this,"style");m(this,"events");m(this,"instance");m(this,"page");m(this,"parent");m(this,"app");m(this,"store",new Ap);this.page=r.page,this.parent=r.parent,this.app=r.app;const{events:n}=r.config;this.data=r.config,this.events=n||[],this.listenLifeSafe()}setData(r){this.data=r,this.emit("update-data")}destroy(){this.removeAllListeners()}listenLifeSafe(){this.once("created",async r=>{this.once("destroy",()=>{this.instance=null,typeof this.data.destroy=="function"&&this.data.destroy(this),this.listenLifeSafe()}),this.instance=r,await this.runHookCode("created")}),this.once("mounted",async r=>{this.instance=r;const n=this.app.eventQueueMap[r.config.id]||[];for(let i=n.shift();i;i=n.shift())this.app.compActionHandler(i.eventConfig,i.fromCpt,i.args);await this.runHookCode("mounted")})}async runHookCode(r){var i,s,o;if(typeof this.data[r]=="function"){await this.data[r](this);return}const n=this.data[r];if((n==null?void 0:n.hookType)===Qn.CODE)for(const a of n.hookData){const{codeType:c=ie.CODE,codeId:u,params:h={}}=a;let f;const $={app:this.app,params:h};if(c===ie.CODE&&typeof u=="string"&&((i=this.app.codeDsl)!=null&&i[u]))f=this.app.codeDsl[u].content;else if(c===ie.DATA_SOURCE_METHOD&&Array.isArray(u)&&u.length>1){const b=(s=this.app.dataSourceManager)==null?void 0:s.get(u[0]);f=(o=b==null?void 0:b.methods.find(w=>w.name===u[1]))==null?void 0:o.content,$.dataSource=b}f&&typeof f=="function"&&await f($)}}}const Ne=Cp;class Dp extends Ne{constructor(r){super(r);m(this,"nodes",new Map);this.setNode(r.config.id,this),this.initNode(r.config,this)}initNode(r,n){var s,o,a;const i=new Ne({config:r,parent:n,page:this,app:this.app});if(this.setNode(r.id,i),r.type==="page-fragment-container"&&r.pageFragmentId){const c=(o=(s=this.app.dsl)==null?void 0:s.items)==null?void 0:o.find(u=>u.id===r.pageFragmentId);c&&(r.items=[c])}(a=r.items)==null||a.forEach(c=>{this.initNode(c,i)})}getNode(r){return this.nodes.get(r)}setNode(r,n){this.nodes.set(r,n)}deleteNode(r){this.nodes.delete(r)}destroy(){super.destroy(),this.nodes.clear()}}const xp=Dp,Mp=t=>{if(typeof t!="string")return t;const e={};return t.split(";").forEach(r=>{if(!r)return;const n=r.split(":");let i=n.shift(),s=n.join(":");i&&(i=i.replace(/^\s*/,"").replace(/\s*$/,""),s=s.replace(/^\s*/,"").replace(/\s*$/,""),i=i.split("-").map((o,a)=>a>0?"".concat(o[0].toUpperCase()).concat(o.substr(1)):o).join(""),e[i]=s)}),e},Pp=t=>t&&!/^url/.test(t)&&!/^linear-gradient/.test(t)?"url(".concat(t,")"):t,Ip=t=>/^(-?\d+)(\.\d+)?$/.test(t);class Lp extends Ue.EventEmitter{constructor(r){var n;super();m(this,"env",new dn);m(this,"dsl");m(this,"codeDsl");m(this,"dataSourceManager");m(this,"page");m(this,"useMock",!1);m(this,"platform","mobile");m(this,"jsEngine","browser");m(this,"designWidth",375);m(this,"request");m(this,"components",new Map);m(this,"eventQueueMap",{});m(this,"eventList",new Map);this.setEnv(r.ua),this.codeDsl=(n=r.config)==null?void 0:n.codeBlocks,r.platform&&(this.platform=r.platform),r.jsEngine&&(this.jsEngine=r.jsEngine),typeof r.useMock=="boolean"&&(this.useMock=r.useMock),typeof r.designWidth<"u"&&this.setDesignWidth(r.designWidth),r.transformStyle&&(this.transformStyle=r.transformStyle),r.request&&(this.request=r.request),r.config&&this.setConfig(r.config,r.curPage),jp(this)}setEnv(r){this.env=new dn(r)}setDesignWidth(r){this.designWidth=r,this.jsEngine==="browser"&&(this.calcFontsize(),globalThis.removeEventListener("resize",this.calcFontsize),globalThis.addEventListener("resize",this.calcFontsize))}transformStyle(r){if(!r)return{};let n={};const i={};typeof r=="string"?n=Mp(r):n={...r};const s=this.jsEngine==="hippy",o=["zIndex","opacity","fontWeight"];return Object.entries(n).forEach(([a,c])=>{a==="scale"&&!i.transform&&s?i.transform=[{scale:c}]:a==="backgroundImage"&&!s?c&&(i[a]=Pp(c)):a==="transform"&&typeof c!="string"?i[a]=this.getTransform(c):!o.includes(a)&&c&&/^[-]?[0-9]*[.]?[0-9]*$/.test(c)?i[a]=s?c:"".concat(c/100,"rem"):i[a]=c}),i}setConfig(r,n){var i,s;this.dsl=r,!n&&r.items.length&&(n=r.items[0].id),this.dataSourceManager&&this.dataSourceManager.destroy(),this.dataSourceManager=Tp(this,this.useMock),this.codeDsl=r.codeBlocks,this.setPage(n||((s=(i=this.page)==null?void 0:i.data)==null?void 0:s.id))}addPage(){console.info("addPage 已经弃用")}setPage(r){var i,s;const n=(i=this.dsl)==null?void 0:i.items.find(o=>"".concat(o.id)==="".concat(r));if(!n){this.page&&(this.page.destroy(),this.page=void 0),super.emit("page-change");return}n!==((s=this.page)==null?void 0:s.data)&&(this.page&&this.page.destroy(),this.page=new xp({config:n,app:this}),super.emit("page-change",this.page),this.bindEvents())}deletePage(){this.page=void 0}getPage(r){if(!r)return this.page;if(this.page&&"".concat(this.page.data.id)==="".concat(r))return this.page}registerComponent(r,n){this.components.set(r,n)}unregisterComponent(r){this.components.delete(r)}resolveComponent(r){return this.components.get(r)}bindEvents(){var r;if(Array.from(this.eventList.keys()).forEach(n=>{const i=this.eventList.get(n);i&&this.off(i,n)}),this.eventList.clear(),!!this.page)for(const[,n]of this.page.nodes)(r=n.events)==null||r.forEach(i=>{const s="".concat(i.name,"_").concat(n.data.id),o=(a,...c)=>{this.eventHandler(i,a,c)};this.eventList.set(o,s),this.on(s,o)})}emit(r,...n){var o;const[i,...s]=n;return i instanceof Ne&&((o=i==null?void 0:i.data)!=null&&o.id)?super.emit("".concat(String(r),"_").concat(i.data.id),i,...s):super.emit(r,...n)}async codeActionHandler(r,n){var a,c;const{codeId:i="",params:s={}}=r;if(!i||Yc(this.codeDsl))return;const o=(c=(a=this.codeDsl)==null?void 0:a[i])==null?void 0:c.content;typeof o=="function"&&await o({app:this,params:s,eventParams:n})}async compActionHandler(r,n,i){if(!this.page)throw new Error("当前没有页面");const{method:s,to:o}=r,a=this.page.getNode(o);if(!a)throw"ID为".concat(o,"的组件不存在");if(Sp(s))return Ep(s,a);a.instance?typeof a.instance[s]=="function"&&await a.instance[s](n,...i):this.addEventToMap({eventConfig:r,fromCpt:n,args:i})}async dataSourceActionHandler(r,n){var f;const{dataSourceMethod:i=[],params:s={}}=r,[o,a]=i;if(!o||!a)return;const c=(f=this.dataSourceManager)==null?void 0:f.get(o);if(!c)return;const h=(c.methods||[]).find($=>$.name===a);h&&typeof h.content=="function"&&await h.content({app:this,params:s,dataSource:c,eventParams:n})}destroy(){this.removeAllListeners(),this.page=void 0,this.jsEngine==="browser"&&globalThis.removeEventListener("resize",this.calcFontsize)}async eventHandler(r,n,i){if(zc(r,"actions")){const{actions:s}=r;for(const o of s)o.actionType===ne.COMP?await this.compActionHandler(o,n,i):o.actionType===ne.CODE?await this.codeActionHandler(o,i):o.actionType===ne.DATA_SOURCE&&await this.dataSourceActionHandler(o,i)}else await this.compActionHandler(r,n,i)}addEventToMap(r){this.eventQueueMap[r.eventConfig.to]?this.eventQueueMap[r.eventConfig.to].push(r):this.eventQueueMap[r.eventConfig.to]=[r]}getTransform(r){if(!r)return[];const n=Object.entries(r).map(([s,o])=>o.trim()?(s==="rotate"&&Ip(o)&&(o="".concat(o,"deg")),this.jsEngine!=="hippy"?"".concat(s,"(").concat(o,")"):{[s]:o}):"");if(this.jsEngine==="hippy")return n;const i=n.join(" ");return i.trim()?i:"none"}calcFontsize(){const{width:r}=document.documentElement.getBoundingClientRect(),n=r/(this.designWidth/100);document.documentElement.style.fontSize="".concat(n,"px")}}const Np=Lp,Fp=Vue.defineComponent({__name:"App",setup(t){var o;const e=Vue.inject("app"),r=Vue.ref(),n=Vue.ref(),i=Vue.ref(),s=Vue.computed(()=>{var a,c,u,h;return((c=(a=r.value)==null?void 0:a.items)==null?void 0:c.find(f=>f.id===n.value))||((h=(u=r.value)==null?void 0:u.items)==null?void 0:h[0])});return Vue.watch(s,async()=>{await Vue.nextTick();const a=document.querySelector(".magic-ui-page");a&&window.magic.onPageElUpdate(a)}),(o=window.magic)==null||o.onRuntimeReady({getApp(){return e},updateRootConfig(a){r.value=a,e==null||e.setConfig(a,n.value)},updatePageId(a){n.value=a,e==null||e.setPage(a)},select(a){var u;i.value=a,e!=null&&e.getPage(a)&&((u=this.updatePageId)==null||u.call(this,a));const c=document.getElementById("".concat(a));return c||Vue.nextTick().then(()=>document.getElementById("".concat(a)))},add({config:a,parentId:c}){var h,f,$,b,w;if(!r.value)throw new Error("error");if(!i.value)throw new Error("error");if(!c)throw new Error("error");const u=Rt(c,[r.value]).pop();if(!u)throw new Error("未找到父节点");if(a.type!=="page"){const g=(h=e==null?void 0:e.page)==null?void 0:h.getNode(u.id);g&&((f=e==null?void 0:e.page)==null||f.initNode(a,g))}if(u.id!==i.value){const g=($=u.items)==null?void 0:$.findIndex(j=>j.id===i.value);(b=u.items)==null||b.splice(g+1,0,a)}else(w=u.items)==null||w.push(a)},update({config:a,parentId:c}){var f,$,b;if(!r.value||!e)throw new Error("error");const u=((f=e.dataSourceManager)==null?void 0:f.compiledNode(a,void 0,!0))||a;Vn(Vue.reactive(u),[r.value],c);const h=($=e.page)==null?void 0:$.getNode(a.id);h&&h.setData(u),((b=e.page)==null?void 0:b.data.id)===a.id&&e.page.setData(u)},remove({id:a,parentId:c}){var $,b;if(!r.value)throw new Error("error");const u=Rt(a,[r.value]).pop();if(!u)throw new Error("未找到目标元素");const h=Rt(c,[r.value]).pop();if(!h)throw new Error("未找到父元素");u.type==="page"?e==null||e.deletePage():($=e==null?void 0:e.page)==null||$.deleteNode(u.id);const f=(b=h.items)==null?void 0:b.findIndex(w=>w.id===u.id);h.items.splice(f,1)}}),(a,c)=>{const u=Vue.resolveComponent("magic-ui-page");return s.value?(Vue.openBlock(),Vue.createBlock(u,{key:s.value.id,config:s.value},null,8,["config"])):Vue.createCommentVNode("",!0)}}});Promise.all([Te(()=>import("./comp-entry-CBqU0JXK.js"),__vite__mapDeps([0,1])),Te(()=>import("./plugin-entry-B1O5LaIO.js"),[]),Te(()=>import("./datasource-entry-yoD6TSFD.js"),[])]).then(([t,e,r])=>{const n=Vue.createApp(Fp);Object.entries(t.default).forEach(([s,o])=>{n.component("magic-ui-".concat(s),o)}),Object.entries(r.default).forEach(([s,o])=>{Ri.register(s,o)}),Object.values(e.default).forEach(s=>{n.use(s)});const i=new Np({ua:window.navigator.userAgent,platform:"editor"});i.env.isWeb&&i.setDesignWidth(window.document.documentElement.getBoundingClientRect().width),window.appInstance=i,n.config.globalProperties.app=i,n.provide("app",i),n.mount("#app")});export{Up as __vite_legacy_guard,Hp as t};
//# sourceMappingURL=index-BZl7JlgR.js.map
