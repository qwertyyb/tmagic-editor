{"version":3,"file":"index-C1Br0_Lx.js","sources":["../../../../../../packages/ui/src/overlay/src/index.vue"],"sourcesContent":["<template>\n  <magic-ui-container v-if=\"visible\" class=\"magic-ui-overlay\" :config=\"{ items: config.items }\">\n    <slot></slot>\n  </magic-ui-container>\n</template>\n<script lang=\"ts\" setup>\nimport { inject, ref } from 'vue';\n\nimport Core from '@tmagic/core';\nimport type { MComponent, MNode } from '@tmagic/schema';\n\nimport useApp from '../../useApp';\n\nconst props = withDefaults(\n  defineProps<{\n    config: MComponent;\n    model?: any;\n  }>(),\n  {\n    model: () => ({}),\n  },\n);\n\nconst visible = ref(false);\nconst app: Core | undefined = inject('app');\nconst node = app?.page?.getNode(props.config.id);\n\nconst openOverlay = () => {\n  visible.value = true;\n  if (app) {\n    app.emit('overlay:open', node);\n  }\n};\n\nconst closeOverlay = () => {\n  visible.value = false;\n  if (app) {\n    app.emit('overlay:close', node);\n  }\n};\n\napp?.page?.on('editor:select', (info, path) => {\n  if (path.find((node: MNode) => node.id === props.config.id)) {\n    openOverlay();\n  } else {\n    closeOverlay();\n  }\n});\n\nuseApp({\n  config: props.config,\n  methods: {\n    openOverlay,\n    closeOverlay,\n  },\n});\n</script>\n"],"names":["props","__props","visible","app","node","_a","openOverlay","closeOverlay","_b","info","path","node2","useApp"],"mappings":"iJAaA,MAAAA,EAAAC,EAUAC,EAAgB,YAChBC,EAA8B,kBAC9BC,GAAAC,EAAAF,GAAA,YAAAA,EAAA,OAAA,YAAAE,EAAA,QAAAL,EAAA,OAAA,IAEAM,EAAA,IAAA,CACEJ,EAAA,MAAA,GACAC,GACEA,EAAA,KAAA,eAAAC,CAAA,CACF,EAGFG,EAAA,IAAA,CACEL,EAAA,MAAA,GACAC,GACEA,EAAA,KAAA,gBAAAC,CAAA,CACF,EAGF,OAAAI,EAAAL,GAAA,YAAAA,EAAA,OAAA,MAAAK,EAAA,GAAA,gBAAA,CAAAC,EAAAC,IAAA,CACEA,EAAA,KAAAC,GAAAA,EAAA,KAAAX,EAAA,OAAA,EAAA,EACEM,IAEAC,GACF,GAGFK,EAAA,CAAO,OAAAZ,EAAA,OACS,QAAA,CACL,YAAAM,EACP,aAAAC,CACA,CACF,CAAA"}